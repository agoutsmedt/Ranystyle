<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Ranystyle">
<title>Using Ranystyle: Extracting, Parsing and Cleaning Bibliographic References • Ranystyle</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Using Ranystyle: Extracting, Parsing and Cleaning Bibliographic References">
<meta property="og:description" content="Ranystyle">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">Ranystyle</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.999</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/using_Ranystyle.html">Using Ranystyle: Extracting, Parsing and Cleaning Bibliographic References</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/agoutsmedt/Ranystyle/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Using Ranystyle: Extracting, Parsing and Cleaning Bibliographic References</h1>
                        <h4 data-toc-skip class="author">Aurélien
Goutsmedt</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/agoutsmedt/Ranystyle/blob/HEAD/vignettes/using_Ranystyle.Rmd" class="external-link"><code>vignettes/using_Ranystyle.Rmd</code></a></small>
      <div class="d-none name"><code>using_Ranystyle.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/agoutsmedt/Ranystyle" class="external-link">Ranystyle</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Ranystyle is an R package designed to automate the extraction,
parsing, and cleaning of bibliographic references from PDF and text
documents. It relies on <a href="https://anystyle.io" class="external-link">anystyle</a>
application.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;&lt;em&gt;anystyle&lt;/em&gt; is under copyright: Copyright
2011-2018 Sylvester Keil. All rights reserved. See the &lt;a href="https://github.com/inukshuk/anystyle-cli/blob/master/LICENSE" class="external-link"&gt;Licence&lt;/a&gt;
for details.&lt;/p&gt;'><sup>1</sup></a> This vignette provides a comprehensive
guide to using Ranystyle’s functionalities, including extracting
references from PDFs, parsing references from text files, and cleaning
and organizing reference data.</p>
</div>
<div class="section level2">
<h2 id="initial-setup-installing-anystyle">Initial Setup: installing anystyle<a class="anchor" aria-label="anchor" href="#initial-setup-installing-anystyle"></a>
</h2>
<p>Before using the functionalities to extract or parse references, you
need to ensure that the <a href="https://anystyle.io" class="external-link">anystyle</a> Ruby
gem is installed on your system.</p>
<p>The <code><a href="../reference/install_anystyle.html">install_anystyle()</a></code> function simplifies the
installation of the necessary ‘anystyle’ components. Ensure that the
Ruby environment is properly configured and that gem can be called from
the command line. See more details on Ruby’s installation <a href="https://www.ruby-lang.org/fr/downloads/" class="external-link">here</a> and on RubyGems
<a href="https://rubygems.org/pages/download?locale=fr" class="external-link">here</a>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install anystyle</span></span>
<span><span class="fu"><a href="../reference/install_anystyle.html">install_anystyle</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="extracting-references-from-pdfs-and-text-files">Extracting References from PDFs and text files<a class="anchor" aria-label="anchor" href="#extracting-references-from-pdfs-and-text-files"></a>
</h2>
<p>The <code><a href="../reference/find_ref.html">find_ref()</a></code> function is used to extract references
from PDF documents. It utilizes the ‘anystyle’ Ruby gem
<code>find</code> function to analyze the document and identify
reference sections from PDF. The <code><a href="../reference/parse_ref.html">parse_ref()</a></code> function,
coming from anystyle <code>parse</code> function, is designed to parse
structured references from text files or from a vector of character. It
reads the text, applies parsing rules, and converts the references into
a structured format.</p>
<p>The package incorporates various academic PDFs with bibliographies,
as well as the bibliographies of these PDFs extracted in a .txt format,
in order to manipulate the different functions of the graph.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Path to the documents of the package</span></span>
<span><span class="va">pdf_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"Ranystyle"</span><span class="op">)</span> </span>
<span><span class="va">files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">pdf_path</span><span class="op">)</span></span>
<span></span>
<span><span class="va">files</span></span></code></pre></div>
<p>You can save the parsed references in various format:
<code>bib</code>, <code>json</code>, <code>xml</code> or
<code>ref</code> (a text document with one reference per line). By
setting <code>path = ""</code> in <code><a href="../reference/find_ref.html">find_ref()</a></code> or
<code><a href="../reference/parse_ref.html">parse_ref()</a></code>, you can directly extract the results in R,
rather than saving the results. Let’s see an example with a PDF.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;The &lt;code&gt;no_layout&lt;/code&gt; parameter can be set to TRUE
when the bibliography has several columns.&lt;/p&gt;"><sup>2</sup></a></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">doc</span> <span class="op">&lt;-</span> <span class="va">files</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">doc</span><span class="op">)</span></span>
<span><span class="va">extracted_refs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/find_ref.html">find_ref</a></span><span class="op">(</span>input <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">pdf_path</span>, <span class="st">"/"</span>, <span class="va">doc</span><span class="op">)</span>,</span>
<span>                           path <span class="op">=</span> <span class="st">""</span>,</span>
<span>                           output_format <span class="op">=</span> <span class="st">"bib"</span>,</span>
<span>                           no_layout <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Print the extracted references</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_trunc.html" class="external-link">str_trunc</a></span><span class="op">(</span><span class="va">extracted_refs</span>, <span class="fl">523</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Or we can parse reference from a .txt.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">doc</span> <span class="op">&lt;-</span> <span class="va">files</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">doc</span><span class="op">)</span></span>
<span><span class="va">extracted_refs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/parse_ref.html">parse_ref</a></span><span class="op">(</span>input <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">pdf_path</span>, <span class="st">"/"</span>, <span class="va">doc</span><span class="op">)</span>,</span>
<span>                           path <span class="op">=</span> <span class="st">""</span>,</span>
<span>                           output_format <span class="op">=</span> <span class="st">"xml"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Print the extracted references</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_trunc.html" class="external-link">str_trunc</a></span><span class="op">(</span><span class="va">extracted_refs</span>, <span class="fl">615</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><code><a href="../reference/parse_ref.html">parse_ref()</a></code> can work directly on a vector of character,
with one reference per line.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># a set of false references</span></span>
<span><span class="va">references</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"Smith, J. (2020). Understanding Artificial Intelligence. AI Journal, 35(5), 123-145."</span>,</span>
<span>  <span class="st">"Johnson, L., and Brown, C. (2018). Advances in Machine Learning. New York: Academic Press."</span>,</span>
<span>  <span class="st">"Clark, E., &amp; Wright, R. (2019). Robotics and Automation. London: Springer, 200-250."</span>,</span>
<span>  <span class="st">"Davis, M. 2021. Quantum Computing: A New Era. Quantum Computing, 5(3):300-320."</span>,</span>
<span>  <span class="st">"Adams, James, and Murphy, Finn. (2022). Exploring Virtual Reality. VR World, 10(7), 777-800."</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">extracted_refs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/parse_ref.html">parse_ref</a></span><span class="op">(</span>input <span class="op">=</span> <span class="va">references</span>,</span>
<span>                           path <span class="op">=</span> <span class="st">""</span>,</span>
<span>                           output_format <span class="op">=</span> <span class="st">"json"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Print the extracted references</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_trunc.html" class="external-link">str_trunc</a></span><span class="op">(</span><span class="va">extracted_refs</span>, <span class="fl">640</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="from-reference-to-data-frame">From Reference to Data Frame<a class="anchor" aria-label="anchor" href="#from-reference-to-data-frame"></a>
</h2>
<p>Depending on whether your start from PDFs or from .txt. or vectors,
you can use two functions: <code><a href="../reference/find_ref_to_df.html">find_ref_to_df()</a></code> and
<code><a href="../reference/find_ref_to_df.html">parse_ref_to_df()</a></code>. These functions create a data frame (a
<code>tibble</code> more precisely) gathering the various information of
the references extracted.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">doc</span> <span class="op">&lt;-</span> <span class="va">files</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">doc</span><span class="op">)</span></span>
<span><span class="va">data_ref</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/find_ref_to_df.html">find_ref_to_df</a></span><span class="op">(</span>input <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">pdf_path</span>, <span class="st">"/"</span>, <span class="va">doc</span><span class="op">)</span>,</span>
<span>                           no_layout <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">data_ref</span><span class="op">)</span></span></code></pre></div>
<p><code><a href="../reference/find_ref_to_df.html">find_ref_to_df()</a></code> and <code><a href="../reference/find_ref_to_df.html">parse_ref_to_df()</a></code> can
also take multiple PDF or .txt documents and create a data frame from
them.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pdfs</span> <span class="op">&lt;-</span> <span class="va">files</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">.</span><span class="op">[</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">.</span>, <span class="st">"\\.pdf$"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">data_ref</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/find_ref_to_df.html">find_ref_to_df</a></span><span class="op">(</span>input <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">pdf_path</span>, <span class="st">"/"</span>, <span class="va">pdfs</span><span class="op">)</span>,</span>
<span>                           clean_ref <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                           no_layout <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data_ref</span></span></code></pre></div>
<p>As you may have seen, anystyle runs twice per document: the second
time serve to extract the references in a .ref format, and is used to
keep the whole reference in a column of the table. This could be useful
for cleaning the data later.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_ref</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">id_ref</span>, <span class="va">full_ref</span><span class="op">)</span></span></code></pre></div>
<p>The data extracted are still a bit messy. Most columns are in list
format, with sometimes two or more element per reference (like two
dates, or two titles). The <code><a href="../reference/clean_ref.html">clean_ref()</a></code> function implements
different cleaning processes:</p>
<ul>
<li>It collapses non-essential columns (i.e. other than
<code>date</code> and <code>title</code>), combining multiple entries
into a single text string.</li>
<li>It reorganizes <code>author</code> information, creating a full name
from given, particle, and family components. Also add an
<code>author_order</code> column. The column will remain in a list
format.</li>
<li>It separates and cleans dates and titles, organizing them into
primary and additional information. The first date and first title are
save in <code>date</code> and <code>title</code>. The other dates and
titles are saved in <code>other_date</code> and
<code>other_title</code>.</li>
<li>It extracts the year from the date and places it in a separate
column.</li>
<li>It removes extraneous punctuation and trims whitespace from
character columns.</li>
<li>It relocates key columns to a more standardized order for easier
analysis and readability.</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_ref</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/clean_ref.html">clean_ref</a></span><span class="op">(</span><span class="va">data_ref</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">data_ref</span></span></code></pre></div>
<p>These cleaning steps are directly implemented in
<code><a href="../reference/find_ref_to_df.html">find_ref_to_df()</a></code> and <code><a href="../reference/find_ref_to_df.html">parse_ref_to_df()</a></code>: you
just need to set <code>clean_ref</code> to TRUE.</p>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Aurélien Goutsmedt.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
